import numpy as np

def get_top_indices(list1, list2, list3, x):
    # Get the indices of the top x% of values in each list
    top_indices1 = np.argsort(list1)[int((1-x)*len(list1)):]
    top_indices2 = np.argsort(list2)[int((1-x)*len(list2)):]
    top_indices3 = np.argsort(list3)[int((1-x)*len(list3)):]

    # Get the set of indices that intersect across all three lists
    intersecting_indices = set(top_indices1).intersection(top_indices2).intersection(top_indices3)

    return top_indices1, top_indices2, top_indices3, intersecting_indices

# Sample lists
list1 = [0.028821274291457755, 0.07695119541592554, 0.10484693877551021, 0.08950731807874868, 0.026814624002729714, 0.16481123981123869, 0.2839088005754672, 0.4348512523512521, 0.2074358974358972, 0.33751980001980003, 0.22009940261235605, 0.09174685418208772, 0.17305493872851396, 0.0914907157831687, 0.04376174140325073, 0.07310945897902432, 0.11118012422360202, 0.227204301 , 0.22686865729898487, 0.19686948853615516, 0.13309104771986835, 0.16024641297567033, 0.27872803106392696, 0.10891449669858722, 0.17463857217378365, 0.08824190936867016, 0.050469483568075124, 0.16762331693098287, 0.1900322397029589, 0.06886348723083446, 0.18742990483496835, 0.27204850466, 0.16925734024179617, 0.11483469035282512, 0.03479836961979832, 0.10470521541950129, 0.02633851468048365, 0.07244660516911783, 0.19223385689354233, 0.16366582135812924, 0.2434911242603548, 0.3108712715855573, 0.16526687598116152, 0.01098901098901095, 0.3546662066586167, 0.07673509286412517, 0.12977174340810693, 0.18243801652892577, 0.030352303523035196, 0.20561797752808986, 0.1704922418405569, 0.1901906, 0.08352370227370187, 0.08594779844779765, 0.04649158662034192, 0.15988486954152137, 0.05708474083760162, 0.14422529198944567, 0.05078190044554243, 0.0593307245, 0.012261580381471404, 0.08991825613079008, 0.04222689075630415, 0.17602001539645862, 0.1303502694380 ]
list2 = [0.052234870124778454, 0.11682960884205684, 0.11446746375317818, 0.05292903390019088, 0.03164399702861265, 0.12074041191688278, 0.2685247601914268, 0.26308814308814343, 0.2272949272949274, 0.2608036333036333, 0.18595941166422747, 0.10423778869374745, 0.15634293743102046, 0.04414511065454474, 0.06672301677851011, 0.17598961693164616, 0.10853653860900236, 0.27508448, 0.22991052194885342, 0.23189807212795677, 0.16856871900539971, 0.2399979205656061, 0.22759841238552048, 0.09709147621827052, 0.06880201208579584, 0.05825768331873149, 0.05516245621879412, 0.19971693503439503, 0.2347423239346681, 0.0639466467394848, 0.19018578188998914, 0.32954731248, 0.16185448115499934, 0.12533420810622864, 0.02455765134336574, 0.10451753933896835, 0.14956822107081202, 0.057058575514072674, 0.177661431064573, 0.08698778210612557, 0.1808849270387738, 0.19918454561311694, 0.1269819466248051, 0.05082417582417598, 0.23492487904252646, 0.22813524236674154, 0.14661878525514938, 0.17915518824609733, 0.0655487804878051, 0.19816969859104727, 0.09316398333252263, 0.18821238, 0.14006327756327752, 0.10960475335475384, 0.07567650675003279, 0.18469241773962775, 0.06477125721976928, 0.19876886072380762, 0.05085916062836249, 0.064361509370, 0.25572207084468657, 0.13330571184794648, 0.07151961914664506, 0.21168247969633636, 0.0750315440 ]
list3 =  [0.07121998290879772, 0.04716788513469028, 0.09509920634920654, 0.03786811479119245, 0.0371144557876939, 0.1785201868535189, 0.30864186697520046, 0.3998680823680826, 0.13852638352638347, 0.28871831996831987, 0.1986921660395583, 0.14865220078748287, 0.2262185011274228, 0.09721754267744842, 0.019080546026300826, 0.12157531143038358, 0.12252703013572586, 0.172365591, 0.22651167707520103, 0.06886517058930841, 0.15077547716165307, 0.1714262419452317, 0.31352527475278197, 0.14233919523573502, 0.14592394074439674, 0.09965566739168263, 0.05929444592080768, 0.21036041264638028, 0.18019423359046804, 0.02568677543167308, 0.2672066440484361, 0.296513727, 0.15177029360967154, 0.08268258080434265, 0.0678967031645602, 0.10233843537414966, 0.08320379965457692, 0.060573712859810724, 0.19512193441719505, 0.10341645533953214, 0.15335305719921166, 0.3318942961800109, 0.11214024071166939, 0.028846153846153855, 0.3080233070745403, 0.07341440975217065, 0.20550021317066713, 0.19309573002754798, 0.034383468834688125, 0.1599986623863029, 0.22069957196361667, 0.212081010420, 0.09835840304590338, 0.1354850386100387, 0.07577025067104792, 0.16577603384849582, 0.1272830279478102, 0.2712253934597151, 0.03317449737939848, 0.1520513161, 0.0033948273551615005, 0.007494428810371101, 0.004667479303444133, 0.12195697188720633, 0.13842245103 ]

# Get the top 0.846% of indices and their intersections
top_indices1, top_indices2, top_indices3, intersecting_indices = get_top_indices(list1, list2, list3, 0.846)
print("Top indices in list 1:", top_indices1)
print("Top indices in list 2:", top_indices2)
print("Top indices in list 3:", top_indices3)
print("Intersecting indices:", intersecting_indices)
print(f"number in top list: {len(top_indices1)}, number in intersection: {len(intersecting_indices)}")
